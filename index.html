<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lịch học TOEIC 990 (19/01 – 31/03/2026)</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; color: #333; padding: 20px; }
    h1 { text-align: center; color: #0066cc; }
    .week { margin-bottom: 30px; border: 1px solid #ccc; padding: 15px; background: #fff; border-radius: 8px; }
    .week h2 { color: #004080; }
    .day { margin-bottom: 10px; }
    .day strong { display: inline-block; width: 140px; }
    label { display: block; margin-left: 20px; }
    input[type="checkbox"] { margin-right: 8px; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; }
    .holiday { background: #ffe9e7; padding: 8px; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>Lịch học TOEIC 990 (19/01 – 31/03/2026)</h1>
  <div id="calendar"></div>

<script>
const start = new Date("2026-01-19");
const end   = new Date("2026-03-31");

// Giai đoạn nghỉ Tết
const tetStart = new Date("2026-02-14");
const tetEnd   = new Date("2026-02-22");

const resources = {
  "Grammar": "https://estudyme.com/en/toeic-testpro/",
  "Vocabulary": "https://www.fastvoca.com/toeic-voca-en/",
  "Listening": "https://www.bestmytest.com/toeic/listening",
  "Reading": "https://www.bestmytest.com/toeic/reading",
  "Full Test": "https://prepedu.com/en/toeic/test-practice"
};

const dailyPlan = [
  { time: "9h30–10h00", task: "Grammar (Part 5–6)", type: "Grammar" },
  { time: "13h30–14h00", task: "Vocabulary theo chủ đề", type: "Vocabulary" },
  { time: "16h30–17h00", task: "Listening (Part 3–4)", type: "Listening" },
  { time: "20h00–20h30", task: "Reading (Part 7)", type: "Reading" }
];

const LS_KEY = "toeic-tracker-progress";
let progress = JSON.parse(localStorage.getItem(LS_KEY) || "{}");

function saveProgress() {
  localStorage.setItem(LS_KEY, JSON.stringify(progress));
}

function fmtDate(d) {
  const dd = String(d.getDate()).padStart(2,"0");
  const mm = String(d.getMonth()+1).padStart(2,"0");
  const days = ["CN","T2","T3","T4","T5","T6","T7"];
  return `${dd}/${mm} (${days[d.getDay()]})`;
}

function inRange(d, start, end) {
  return d >= start && d <= end;
}

const cal = document.getElementById("calendar");
let cur = new Date(start);
let weekCount = 1;

while (cur <= end) {
  const weekBox = document.createElement("div");
  weekBox.className = "week";
  const weekEnd = new Date(cur);
  weekEnd.setDate(weekEnd.getDate()+6);
  if (weekEnd > end) weekEnd = end;

  const h2 = document.createElement("h2");
  h2.textContent = `Tuần ${weekCount} (${fmtDate(cur)} – ${fmtDate(weekEnd)})`;
  weekBox.appendChild(h2);

  for (let i=0;i<7 && cur<=end;i++) {
    const dayBox = document.createElement("div");
    dayBox.className = "day";
    const title = document.createElement("strong");
    title.textContent = fmtDate(cur);
    dayBox.appendChild(title);

    if (inRange(cur,tetStart,tetEnd)) {
      const note = document.createElement("div");
      note.className = "holiday";
      note.textContent = "Nghỉ Tết";
      dayBox.appendChild(note);
    } else {
      dailyPlan.forEach((item, idx) => {
        const label = document.createElement("label");
        const cb = document.createElement("input");
        cb.type = "checkbox";
        const key = `${cur.toISOString().slice(0,10)}::${idx}`;
        if (progress[key]) cb.checked = true;
        cb.addEventListener("change", () => {
          progress[key] = cb.checked;
          saveProgress();
        });
        label.appendChild(cb);
        const link = document.createElement("a");
        link.href = resources[item.type];
        link.target = "_blank";
        link.textContent = `${item.time}: ${item.task}`;
        label.appendChild(link);
        dayBox.appendChild(label);
      });
    }

    weekBox.appendChild(dayBox);
    cur.setDate(cur.getDate()+1);
  }

  cal.appendChild(weekBox);
  weekCount++;
}
</script>
</body>
</html>
